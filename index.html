<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Sea Battle Neon 2026</title>
    <link href="fonts.googleapis.com" rel="stylesheet">
    <style>
        :root { --neon-blue: #00f2ff; --neon-red: #ff0055; --bg-dark: #020b1a; }
        body { background: var(--bg-dark); color: var(--neon-blue); font-family: 'Orbitron', sans-serif; display: flex; flex-direction: column; align-items: center; margin: 0; min-height: 100vh; overflow-x: hidden; }
        
        /* –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ */
        #main-menu { display: flex; flex-direction: column; gap: 20px; padding-top: 50px; text-align: center; }
        .menu-card { background: rgba(0, 242, 255, 0.05); padding: 25px; border: 2px solid var(--neon-blue); width: 350px; }
        .hidden { display: none !important; }

        /* –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù */
        #game-screen { width: 100%; display: flex; flex-direction: column; align-items: center; }
        .game-container { display: flex; gap: 40px; padding: 20px; flex-wrap: wrap; justify-content: center; }
        .grid { display: grid; grid-template-columns: repeat(10, 40px); grid-template-rows: repeat(10, 40px); gap: 2px; background: rgba(0, 242, 255, 0.1); border: 3px solid var(--neon-blue); }
        .cell { width: 40px; height: 40px; background: rgba(2, 11, 26, 0.8); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 20px; transition: 0.2s; }
        
        /* –°–û–°–¢–û–Ø–ù–ò–Ø –ö–õ–ï–¢–û–ö */
        .ship { background: var(--neon-blue) !important; box-shadow: inset 0 0 10px #000; }
        .hit { background: rgba(255, 0, 85, 0.3) !important; animation: shake 0.2s; }
        .hit::after { content: "üí•"; }
        .miss::after { content: "‚Ä¢"; color: var(--neon-blue); font-size: 30px; }
        .radar-scan { background: rgba(255, 165, 0, 0.5) !important; }

        /* –ö–ù–û–ü–ö–ò */
        .btn { padding: 10px; border: 2px solid var(--neon-blue); color: var(--neon-blue); cursor: pointer; }
        .super-weapons { margin-top: 10px; display: flex; gap: 10px; justify-content: center; }
        .super-weapon-btn { background: #ff9d00; color: black; border-color: #ff9d00; }
        .disabled-btn { opacity: 0.5; cursor: not-allowed; }

        #status-text { height: 70px; font-size: 1.3rem; text-align: center; margin-top: 20px; }
        .kill-msg { color: var(--neon-red); font-weight: bold; }
    </style>
</head>
<body>

    <!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
    <div id="main-menu">
        <h1>SEA BATTLE <span style="color:var(--neon-red)">NEON</span></h1>
        <div class="menu-card">
            <h3>–ú–£–õ–¨–¢–ò–ü–õ–ï–ï–†</h3>
            <input type="text" id="room-id" placeholder="ID –ö–û–ú–ù–ê–¢–´">
            <input type="password" id="room-pass" placeholder="–ü–ê–†–û–õ–¨">
            <button class="btn" onclick="startMultiplayer()">–°–û–ó–î–ê–¢–¨ / –í–û–ô–¢–ò</button>
        </div>
        <div class="menu-card">
            <h3>–û–î–ò–ù–û–ß–ù–ê–Ø –ò–ì–†–ê</h3>
            <button class="btn" onclick="startAI('easy')">–õ–ï–ì–ö–ò–ô –ò–ò</button>
            <button class="btn" onclick="startAI('hard')">–°–õ–û–ñ–ù–´–ô –ò–ò</button>
        </div>
    </div>

    <!-- –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù -->
    <div id="game-screen" class="hidden">
        <div id="status-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        
        <div class="super-weapons">
            <button id="btn-airstrike" class="btn super-weapon-btn" onclick="activateSuperWeapon('airstrike')">–ê–≤–∏–∞—É–¥–∞—Ä (1)</button>
            <button id="btn-radar" class="btn super-weapon-btn" onclick="activateSuperWeapon('radar')">–†–∞–¥–∞—Ä (1)</button>
        </div>
        
        <div class="game-container">
            <div>
                <p>–í–ê–® –§–õ–û–¢ (–ü–í–û –≤ —Ä—è–¥–∞—Ö 4 –∏ 5)</p>
                <div id="my-grid" class="grid"></div>
            </div>
            <div id="enemy-box" class="hidden">
                <p>–†–ê–î–ê–† –í–†–ê–ì–ê</p>
                <div id="enemy-grid" class="grid"></div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const sounds = { bg: new Audio('bg_music.mp3'), shot: new Audio('shot.mp3'), hit: new Audio('hit.mp3'), miss: new Audio('miss.mp3') };
        sounds.bg.loop = true;

        let isAI = false, gameActive = false, canMove = false;
        let myShipsMap = Array(100).fill(null), myShipsHealth = {};
        let enemyShipsMap = Array(100).fill(null), enemyShipsHealth = {};
        let playerHits = 0, enemyHits = 0, WIN_SCORE = 20;

        let availableWeapons = { airstrike: 1, radar: 1 };
        let activeWeapon = null;
        // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –ü–í–û –∞–∫—Ç–∏–≤–Ω—ã –≤ —Ä—è–¥–∞—Ö 40-59 (–∏–Ω–¥–µ–∫—Å—ã 40-59)
        const PVO_ROWS = [4, 5]; 
        // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –†–∞–∑–º–µ—Ä—ã –∫–æ—Ä–∞–±–ª–µ–π –¥–ª—è –ò–ò –∏ —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–≥—Ä–æ–∫–∞
        const SHIP_SIZES_TO_PLACE = [4, 3, 3, 2, 2, 2, 1, 1, 1, 1]; 

        const myGrid = document.getElementById('my-grid');
        const enemyGrid = document.getElementById('enemy-grid');
        const status = document.getElementById('status-text');

        for (let i = 0; i < 100; i++) {
            const mCell = document.createElement('div'); mCell.className = 'cell'; mCell.id = `my-${i}`; myGrid.appendChild(mCell);
            const eCell = document.createElement('div'); eCell.className = 'cell'; eCell.id = `enemy-${i}`; eCell.onclick = () => fire(i); enemyGrid.appendChild(eCell);
        }

        // --- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ –ò –°–¢–ê–†–¢ –ò–ì–†–´ ---
        function startMultiplayer() {
            const room = document.getElementById('room-id').value;
            const pass = document.getElementById('room-pass').value;
            if(!room || !pass) return alert("–í–≤–µ–¥–∏—Ç–µ ID –∏ –ø–∞—Ä–æ–ª—å");
            isAI = false;
            socket.emit('joinCustomRoom', { room, pass });
            enterGame();
        }

        function startAI(level) {
            isAI = true;
            aiLevel = level;
            enterGame();
            generateAIField(); // –ò–ò —Ä–∞—Å—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ—Ä–∞–±–ª–∏ —Å—Ä–∞–∑—É
            setupPlayerPlacementUI();
            status.innerText = "–†–∞—Å—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π —Ñ–ª–æ—Ç";
        }

        function enterGame() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            sounds.bg.play().catch(()=>{});
        }
        
        function setupPlayerPlacementUI() {
             const factoryDiv = document.createElement('div');
             factoryDiv.id = 'factory';
             factoryDiv.className = 'ship-controls';
             factoryDiv.innerHTML = `
                <button class="btn" style="width: 50px;" id="btn-size-4" onclick="selectType(4)">4</button>
                <button class="btn" style="width: 50px;" id="btn-size-3" onclick="selectType(3)">3</button>
                <button class="btn" style="width: 50px;" id="btn-size-2" onclick="selectType(2)">2</button>
                <button class="btn" style="width: 50px;" id="btn-size-1" onclick="selectType(1)">1</button>
                <button class="btn" onclick="toggleRotate()">–ü–û–í–û–†–û–¢ (R)</button>
             `;
             document.querySelector('.super-weapons').insertAdjacentElement('beforebegin', factoryDiv);
             selectType(4); 
             document.addEventListener('keydown', (e) => { if(e.key.toLowerCase() === 'r' || e.key.toLowerCase() === '–∫') toggleRotate(); });
             const startBtn = document.createElement('button');
             startBtn.id = 'start-btn';
             startBtn.className = 'btn';
             startBtn.disabled = true;
             startBtn.innerText = '–í –ë–û–ô!';
             startBtn.onclick = readyToBattle;
             document.querySelector('.game-container > div:first-child').appendChild(startBtn);
        }

        // --- –†–ê–°–°–¢–ê–ù–û–í–ö–ê –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–æ—Å–µ–¥–µ–π) ---
        let currentSize = 4, isVertical = false, currentPlaced = { 4:0, 3:0, 2:0, 1:0 }, shipLimits = { 4:1, 3:2, 2:3, 1:4 };

        function selectType(s) { 
            if (currentPlaced[s] < shipLimits[s]) {
                currentSize = s;
                document.querySelectorAll('#factory .btn[id^="btn-size-"]').forEach(btn => btn.classList.remove('active'));
                const selectedBtn = document.getElementById(`btn-size-${s}`);
                if (selectedBtn) selectedBtn.classList.add('active');
            }
        }
        function toggleRotate() { isVertical = !isVertical; }

        function getIndices(idx, size, vert) {
            let res = [], r = Math.floor(idx / 10), c = idx % 10;
            for (let i = 0; i < size; i++) {
                let nr = vert ? r + i : r, nc = vert ? c : c + i;
                if (nr > 9 || nc > 9) return null;
                res.push(nr * 10 + nc);
            }
            return res;
        }
        
        function isAreaClear(indices, map) {
             for (const shipIdx of indices) {
                let nr = Math.floor(shipIdx / 10), nc = shipIdx % 10;
                for (let dr = -1; dr <= 1; dr++) {
                    for (let dc = -1; dc <= 1; dc++) {
                        let neighborIdx = (nr + dr) * 10 + (nc + dc);
                        if (neighborIdx >= 0 && neighborIdx < 100 && map[neighborIdx] !== null && !indices.includes(neighborIdx)) {
                            return false; 
                        }
                    }
                }
            }
            return true;
        }

        function drawPreview(idx, show) {
            if (gameActive) return;
            let coords = getIndices(idx, currentSize, isVertical);
            if (coords) coords.forEach(i => {
                const cell = document.getElementById(`my-${i}`);
                if(cell) cell.classList.toggle('preview', show);
            });
        }

        function placeShip(idx) {
            if (gameActive || currentPlaced[currentSize] >= shipLimits[currentSize]) return;
            let coords = getIndices(idx, currentSize, isVertical);
            if (!coords || !isAreaClear(coords, myShipsMap)) {
                return alert("–ù–µ–ª—å–∑—è —Å—Ç–∞–≤–∏—Ç—å –∫–æ—Ä–∞–±–ª–∏ –≤–ø–ª–æ—Ç–Ω—É—é –∏–ª–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π –ø–æ–ª—è!");
            }
            let id = `s-${Date.now()}`;
            myShipsHealth[id] = currentSize;
            coords.forEach(i => {
                myShipsMap[i] = { id, size: currentSize };
                document.getElementById(`my-${i}`).classList.add('ship');
            });
            currentPlaced[currentSize]++;
            sounds.shot.play();
            checkReady();
            updateShipButtons();
        }

        function updateShipButtons() {
            for (const size in shipLimits) {
                const btn = document.getElementById(`btn-size-${size}`);
                if (btn) {
                   if (currentPlaced[size] >= shipLimits[size]) {
                        btn.disabled = true;
                        btn.classList.remove('active');
                   } else {
                        btn.disabled = false;
                   }
                }
            }
            for (const size in shipLimits) {
                if (currentPlaced[size] < shipLimits[size]) {
                    selectType(parseInt(size));
                    break;
                }
            }
        }

        function checkReady() {
            let total = Object.values(currentPlaced).reduce((a,b)=>a+b, 0);
            if (total === 10) document.getElementById('start-btn').disabled = false;
            status.innerText = `–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–æ—Ä–∞–ª–µ–π: ${total}/10`;
        }

        function readyToBattle() {
            if (isAI) {
                gameActive = true;
                canMove = true;
                document.getElementById('enemy-box').classList.remove('hidden');
                document.getElementById('factory').classList.add('hidden');
                document.getElementById('start-btn').classList.add('hidden');
                status.innerText = "–í–ê–® –•–û–î";
            } else {
                socket.emit('playerReady');
                document.getElementById('start-btn').innerText = "–û–ñ–ò–î–ê–ù–ò–ï –í–†–ê–ì–ê...";
                document.getElementById('start-btn').disabled = true;
            }
            updateWeaponButtons();
        }

        // --- –ë–û–ô ---
        function fire(idx) {
            if (!gameActive || !canMove) return;
            if (activeWeapon) {
                useSuperWeapon(idx);
            } else {
                const cell = document.getElementById(`enemy-${idx}`);
                if (cell.classList.contains('hit') || cell.classList.contains('miss') || cell.classList.contains('radar-scan')) return;
                sounds.shot.currentTime = 0; sounds.shot.play();
                if (isAI) handleAIShot(idx);
                else { canMove = false; socket.emit('makeMove', { index: idx }); }
            }
        }
        
        function updateWeaponButtons() {
            if (availableWeapons.airstrike === 0) document.getElementById('btn-airstrike').classList.add('disabled-btn');
            if (availableWeapons.radar === 0) document.getElementById('btn-radar').classList.add('disabled-btn');
        }

        function activateSuperWeapon(weaponType) {
            if (!gameActive || availableWeapons[weaponType] === 0 || activeWeapon === weaponType) return;
            activeWeapon = weaponType;
            status.innerText = `–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∞–¥—Ä–∞—Ç –¥–ª—è ${weaponType === 'airstrike' ? '–∞–≤–∏–∞—É–¥–∞—Ä–∞ (1—Ö4)' : '—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–¥–∞—Ä–æ–º (3—Ö3)'}.`;
        }
        
        function useSuperWeapon(idx) {
            let coords;
            if (activeWeapon === 'airstrike') {
                 coords = getIndices(idx, 4, false); // –ê–≤–∏–∞—É–¥–∞—Ä –≤—Å–µ–≥–¥–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π 1—Ö4
                 if (!coords) return alert("–ù–µ–ª—å–∑—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∑–¥–µ—Å—å –∞–≤–∏–∞—É–¥–∞—Ä!");
                 if (isAI) handleAirstrikeAI(coords);
                 else socket.emit('useAirstrike', { indices: coords });
                 availableWeapons.airstrike--;
            } else if (activeWeapon === 'radar') {
                 let r = Math.floor(idx/10), c = idx%10;
                 coords = [];
                 for(let dr = -1; dr <= 1; dr++) for(let dc = -1; dc <= 1; dc++) {
                    let tempIdx = (r + dr) * 10 + (c + dc);
                    if(tempIdx >= 0 && tempIdx < 100 && (r + dr) >= 0 && (r + dr) < 10 && (c + dc) >= 0 && (c + dc) < 10) coords.push(tempIdx);
                 }
                 if (isAI) handleRadarAI(coords);
                 else socket.emit('useRadar', { indices: coords });
                 availableWeapons.radar--;
            }
            activeWeapon = null;
            canMove = false;
            updateWeaponButtons();
        }

        // --- –õ–û–ì–ò–ö–ê –ò–ò –° –°–£–ü–ï–†–û–†–£–ñ–ò–ï–ú ---
        function generateAIField() {
            for (const size of SHIP_SIZES_TO_PLACE) {
                let placed = false;
                while (!placed) {
                    let vertical = Math.random() > 0.5;
                    let startIdx = Math.floor(Math.random() * 100);
                    let coords = getIndices(startIdx, size, vertical); 
                    if (coords && isAreaClear(coords, enemyShipsMap)) {
                        const id = `ai-${Date.now()}-${size}`;
                        enemyShipsHealth[id] = size;
                        coords.forEach(i => { enemyShipsMap[i] = { id, size }; });
                        placed = true;
                    }
                }
            }
        }

        function handleAirstrikeAI(indices) {
            let pvoActivated = false;
            for (const idx of indices) { if (PVO_ROWS.includes(Math.floor(idx / 10))) pvoActivated = true; }
            if (pvoActivated) { alert("–ü–í–û –ò–ò –°–ë–ò–õ–û –í–ê–® –ê–í–ò–ê–£–î–ê–†!"); canMove = false; setTimeout(aiMove, 1000); return; }
            for (const idx of indices) {
                 const cell = document.getElementById(`enemy-${idx}`);
                 if (cell.classList.contains('hit') || cell.classList.contains('miss')) continue;
                 const shipData = enemyShipsMap[idx];
                 if (shipData) {
                    cell.classList.add('hit'); sounds.hit.play(); enemyShipsHealth[shipData.id]--; playerHits++;
                    if (enemyShipsHealth[shipData.id] === 0) status.innerHTML = `<span class="kill-msg">–£–ë–ò–¢ ${shipData.size}-–ü–ê–õ–£–ë–ù–´–ô!</span>`;
                 } else { cell.classList.add('miss'); sounds.miss.play(); }
            }
            if (playerHits === WIN_SCORE) { status.innerText = "–ü–û–ë–ï–î–ê!"; gameActive = false; }
            else { canMove = false; setTimeout(aiMove, 1000); }
        }

        function handleRadarAI(indices) {
            let found = false;
            for (const idx of indices) { if (enemyShipsMap[idx]) found = true; document.getElementById(`enemy-${idx}`).classList.add('radar-scan'); }
            if (found) alert("–†–ê–î–ê–† –ß–¢–û-–¢–û –ù–ê–®–ï–õ –í –°–ï–ö–¢–û–†–ï!"); else alert("–°–ï–ö–¢–û–† –ß–ò–°–¢.");
            canMove = false; setTimeout(aiMove, 1000);
        }

        function handleAIShot(idx) {
            const cell = document.getElementById(`enemy-${idx}`);
            const shipData = enemyShipsMap[idx];
            let killedSize = 0;
            if (shipData) {
                cell.classList.add('hit'); sounds.hit.play(); enemyShipsHealth[shipData.id]--;
                if (enemyShipsHealth[shipData.id] === 0) killedSize = shipData.size;
                playerHits++;
                if (killedSize > 0) status.innerHTML = `<span class="kill-msg">–£–ë–ò–¢ ${killedSize}-–ü–ê–õ–£–ë–ù–´–ô!</span>`;
                if (playerHits === WIN_SCORE) { status.innerText = "–ü–û–ë–ï–î–ê!"; gameActive = false; }
            } else { cell.classList.add('miss'); sounds.miss.play(); canMove = false; status.innerText = "–•–û–î –ò–ò..."; setTimeout(aiMove, 1000); }
        }

        function aiMove() {
            if (!gameActive) return;
            let idx = Math.floor(Math.random()*100);
            let cell = document.getElementById(`my-${idx}`);
            if(cell.classList.contains('hit') || cell.classList.contains('miss')) return aiMove();
            if (myShipsMap[idx]) {
                cell.classList.add('hit'); sounds.hit.play(); enemyHits++;
                if (enemyHits === WIN_SCORE) { status.innerText = "–ü–û–†–ê–ñ–ï–ù–ò–ï!"; gameActive = false; }
                else setTimeout(aiMove, 1000); 
            } else { cell.classList.add('miss'); sounds.miss.play(); canMove = true; status.innerText = "–í–ê–® –•–û–î"; }
        }

        // --- –°–ï–¢–¨ ---
        socket.on('waiting', (msg) => { status.innerText = msg; });
        socket.on('errorMsg', (msg) => { alert(msg); location.reload(); });
        socket.on('enemyDisconnected', () => { alert("–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫ –ø–æ–∫–∏–Ω—É–ª –±–æ–π."); location.reload(); });
        socket.on('gameStart', (data) => {
            gameActive = true; canMove = data.canMove;
            document.getElementById('enemy-box').classList.remove('hidden');
            // –ü—Ä–∏ —Å–µ—Ç–µ–≤–æ–π –∏–≥—Ä–µ UI —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ –Ω—É–∂–µ–Ω
            if(document.getElementById('factory')) document.getElementById('factory').classList.add('hidden'); 
            if(document.getElementById('start-btn')) document.getElementById('start-btn').classList.add('hidden');
            status.innerText = canMove ? "–í–ê–® –•–û–î" : "–•–û–î –ü–†–û–¢–ò–í–ù–ò–ö–ê";
            updateWeaponButtons();
        });
        
        socket.on('enemyMove', (data) => {
            const cell = document.getElementById(`my-${data.index}`); const ship = myShipsMap[data.index]; const isHit = !!ship;
            cell.classList.add(isHit ? 'hit' : 'miss');
            if (isHit) { sounds.hit.play(); enemyHits++; if(enemyHits === WIN_SCORE) { status.innerText = "–í–´ –ü–†–û–ò–ì–†–ê–õ–ò"; gameActive = false; } }
            else { sounds.miss.play(); canMove = true; status.innerText = "–í–ê–® –•–û–î"; }
            socket.emit('shotResult', { index: data.index, isHit });
            checkGameOver(); // <-- –î–æ–±–∞–≤–ª–µ–Ω–æ
        });

        socket.on('updateResult', (data) => {
            const cell = document.getElementById(`enemy-${data.index}`); cell.classList.add(data.isHit ? 'hit' : 'miss');
            if (data.isHit) { sounds.hit.play(); playerHits++; canMove = true; status.innerText = playerHits === WIN_SCORE ? "–ü–û–ë–ï–î–ê!" : "–ü–û–ü–ê–î–ê–ù–ò–ï! –í–∞—à —Ö–æ–¥"; }
            else { sounds.miss.play(); canMove = false; status.innerText = "–ü–†–û–ú–ê–•! –•–æ–¥ –≤—Ä–∞–≥–∞"; }
            checkGameOver(); // <-- –î–æ–±–∞–≤–ª–µ–Ω–æ
        });

        // –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—É–ø–µ—Ä–æ—Ä—É–∂–∏—è –¥–ª—è —Å–µ—Ç–µ–≤–æ–π –∏–≥—Ä—ã
        socket.on('updateAirstrikeResult', (data) => {
            for (const result of data.results) {
                 const cell = document.getElementById(`enemy-${result.index}`);
                 if (cell.classList.contains('hit') || cell.classList.contains('miss')) continue;
                 if (result.isHit) {
                    cell.classList.add('hit'); sounds.hit.play(); playerHits++;
                 } else {
                    cell.classList.add('miss'); sounds.miss.play();
                 }
            }
            if (playerHits === WIN_SCORE) status.innerText = "–ü–û–ë–ï–î–ê!";
            else { canMove = true; status.innerText = "–í–∞—à —Ö–æ–¥ (–∞–≤–∏–∞—É–¥–∞—Ä –∑–∞–≤–µ—Ä—à–µ–Ω)"; }
        });

        socket.on('updateRadarResult', (data) => {
            if (data.found) alert("–†–ê–î–ê–† –ß–¢–û-–¢–û –ù–ê–®–ï–õ –í –°–ï–ö–¢–û–†–ï!"); else alert("–°–ï–ö–¢–û–† –ß–ò–°–¢.");
            canMove = true; status.innerText = "–í–∞—à —Ö–æ–¥ (—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ)";
        });

        function checkGameOver() {
            if (playerHits === WIN_SCORE || enemyHits === WIN_SCORE) {
                gameActive = false;
                status.innerText = playerHits === WIN_SCORE ? "–ü–û–ë–ï–î–ê!" : "–ü–û–†–ê–ñ–ï–ù–ò–ï!";
            }
        }
    </script>
</body>
</html>
